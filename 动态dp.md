## 广义矩阵乘法
朴素的矩阵只能完成线性运算的维护,
在dp中不太够用,所以对矩阵进行拓展
对于 $A \oplus B = C,\oplus$为定义的运算
朴素的矩阵为 
$$C_{i,j} =\sum_{k = 1}^{k <= A列数} A_{i,k} \times B_{k,j} $$
理解 : 在矩阵乘法中,
右边的矩阵可以看成是多个列向量并排放在一起,
左边的矩阵可以看作多个横向量放在一起
乘法是将行向量与每个列向量相乘,然后再放在一起

### 结合律
$(AB)C = A(BC) = D$
理解: 
考虑$D_{i,j}$的值,
$(AB)C$ :
1.$A$的第$i$个行向量 与 $B$中所有列向量相乘得到新的行向量,
2.由新的行向量与$D$中第$j$个列向量相乘得到
$A*(BC)$ :
1.$C$的第$j$个列向量 与 $B$中所有行向量相乘得到新的列向量,
2.由新的列向量与$A$中第$i$个列向量相乘得到

显然只与$A$的第$i$个行向量,$B$,$C$的第$j$个列向量 有关
简化后随便一列式子,就能发现

**只要加法位置满足结合律和交换律,乘法位置满足结合律
同时乘法位置对加法位置满足分配律,
新运算就满足结合律**

eg :
$$
C_{i,j}=\max_{k=1}^{n}(A_{i,k}+B_{k,j})
$$

## 动态dp
如何在有修改的情况下进行dp方程的转移 ?
可以列出dp方程后用矩阵进行转移,
因为其具有结合律,所以可以用很多DS来维护

因为其满足结合律,所以可以方便的用线段树维护,
所以经常与链剖相结合,
**再设一个g表示只考虑轻孩子的时的dp值**,
这样改变一个点时,只会改变切换链时g的值,
因此更改的个数只有$log(n)$

**所以树/序列上带修改操作的可用dp维护的信息**,
要想到动态dp
eg : ["动态 DP"&动态树分治](https://www.luogu.com.cn/problem/P4719)